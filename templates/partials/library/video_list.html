{{ define "library/video_list" }}
<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
    {{ range . }}
    <a href="/{{ .ResourceID }}" data-async-target="main" class="group flex">
        <div class="bg-w-card border border-w-line rounded-xl overflow-hidden hover:border-w-purple/30 transition-all duration-300 flex flex-col w-full">
            <figure class="aspect-[2/3] overflow-hidden">
                {{ if . | hasPoster }}
                    <img class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                         src="{{ . | getCachedPoster240 }}" alt="{{ . | getTitle }}{{ if . | hasYear }} ({{ . | getYear }}){{ end }}" />
                {{ else }}
                    <div class="w-full h-full bg-gradient-to-br from-w-purple/20 via-w-pink/10 to-w-cyan/15 text-w-purpleL/60 flex items-center justify-center">
                        <div class="text-center font-bold text-lg p-3 line-clamp-3 drop-shadow-sm">{{ . | getTitle }}</div>
                    </div>
                {{ end }}
            </figure>
            <div class="p-3">
                <h3 class="font-semibold text-sm line-clamp-1 group-hover:text-w-purpleL transition-colors">{{ . | getTitle }}</h3>
                <div class="flex justify-between items-center mt-1.5">
                    <span class="text-xs text-w-muted">{{ if . | hasYear }}{{ . | getYear }}{{ end }}</span>
                    {{ if . | hasRating }}
                        <div class="flex items-center gap-1">
                            {{ template "library/stars" . | getRating | makeStars }}
                            <span class="text-xs text-w-muted">{{ . | getRating | float1 }}</span>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </a>
    {{ end }}
</div>
{{ end }}
