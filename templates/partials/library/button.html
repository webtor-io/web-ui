{{ define "library/button" }}
    {{ if .User | hasAuth }}
        {{ with .Data.Resource }}
            {{ if .InLibrary }}
                <form method="post" enctype="multipart/form-data" data-async-push-state="false" action="/lib/remove" data-async-target="#library-button">
                    <input type="hidden" name="resource_id" value="{{ .ID }}" />
                    <button type="submit" class="btn btn-ghost btn-sm text-w-pinkL hover:bg-w-pink/10 whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m3 3 1.664 1.664M21 21l-1.5-1.5m-5.485-1.242L12 17.25 4.5 21V8.742m.164-4.078a2.15 2.15 0 0 1 1.743-1.342 48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185V19.5M4.664 4.664 19.5 19.5" />
                        </svg>
                        Remove from library
                    </button>
                </form>
            {{ else }}
                <form method="post" enctype="multipart/form-data" data-async-push-state="false" action="/lib/add" data-async-target="#library-button">
                    <input type="hidden" name="resource_id" value="{{ .ID }}" />
                    <button type="submit" class="btn btn-soft btn-sm whitespace-nowrap" data-umami-event="add-to-library">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" />
                        </svg>
                        Add to library
                    </button>
                </form>
            {{ end }}
        {{ end }}
    {{ else }}
        <a href="/login?from=library" class="btn btn-soft btn-sm whitespace-nowrap" data-umami-event="add-to-library-anonymous" data-async-target="main">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" />
            </svg>
            Add to library
        </a>
    {{ end }}
{{ end }}
