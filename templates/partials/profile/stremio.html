{{ define "profile/stremio" }}
    <div class="hero bg-base-200">
        <div class="hero-content text-center w-full">
            <div class="w-full">
                <h2 class="text-2xl font-bold text-accent">Stremio integration</h2>
                <div class="flex flex-col justify-center items-center mt-6 mb-3 w-full">
                    {{ if eq .Data.StremioAddonURL "" }}
                        <form method="post" enctype="multipart/form-data" data-async-push-state="false" action="/stremio/url/generate" data-async-target="#stremio">
                            <button type="submit" class="btn btn-accent btn-outline capitalize whitespace-nowrap" data-umami-event="stremio-generate-addon-url">
                                Generate addon url
                            </button>
                        </form>
                    {{ else }}
                        <script>
                            var stremioAddonUrl = "{{ domain }}{{ .Data.StremioAddonURL }}";
                            function copyStremioAddonUrl(form, e) {
                                e.preventDefault();
                                navigator.clipboard.writeText(stremioAddonUrl);
                                return false;
                            }
                        </script>
                        <div class="w-full sm:px-5">
                            <form onsubmit="copyStremioAddonUrl(this, event)" class="join w-full">
                                <input name="token" readonly class="input input-bordered w-full join-item" value="{{ domain }}{{ .Data.StremioAddonURL }}" />
                                <button type="submit" class="btn btn-accent join-item capitalize" data-umami-event="stremio-copy-addon-url">copy addon url</button>
                            </form>
                            {{ if not (eq .Data.StremioAddonURL "") }}
                                <a class="btn btn-accent btn-outline capitalize mt-6 btn-lg" href="stremio://{{ domainWithoutProtocol }}{{ .Data.StremioAddonURL }}" data-umami-event="stremio-install-addon" target="_blank">Install in Stremio</a>
                            {{ end }}
                            <div class="text-left w-full text-sm text-accent mt-2">
                                <span class="text-accent">â“˜</span>
                                <a href="/instructions/stremio" class="hover:underline" data-umami-event="instruction-stremio" target="_blank">How to connect to Stremio?</a>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </div>
{{ end }}
