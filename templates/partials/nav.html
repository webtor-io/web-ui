{{ define "nav" }}
<script>
    window._tier = "{{ .Claims | tierName }}";
    window._isNewUser = {{ .User.IsNew }};
    {{- if .User | hasAuth }}
    window._userId = "{{ .User.ID }}";
    {{- else }}
    window._userId = null;
    {{- end }}
    window._tierUpdated = {{ .TierUpdated }};
</script>
<div class="navbar navbar-redesign fixed top-0 inset-x-0 z-50 backdrop-blur-xl border-b border-w-line px-4 md:px-10 h-[72px]">
    <div class="navbar-start">
        <a href="/" data-async-target="main" class="font-logo text-[1.6rem] font-light tracking-tight normal-case no-underline">
            web<span class="text-w-pink">tor</span>
        </a>
    </div>
    {{ if and .Data (eq (printf "%T" .Data) "*index.Data") }}
        <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1 gap-1 text-sm font-medium">
            <li><a href="#how" class="text-w-sub hover:text-base-content transition-colors">How it works</a></li>
            <li><a href="#features" class="text-w-sub hover:text-base-content transition-colors">Features</a></li>
            <li><a href="#faq" class="text-w-sub hover:text-base-content transition-colors">FAQ</a></li>
            <li><a href="https://blog.webtor.io/en/post/" target="_blank" class="text-w-sub hover:text-base-content transition-colors">Blog</a></li>
        </ul>
    </div>
    {{ end }}
    <div class="navbar-end gap-2">
        <a class="btn btn-ghost btn-sm border border-w-line text-w-sub hover:border-w-pink hover:text-base-content whitespace-nowrap" href="/lib/" data-async-target="main">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" />
            </svg>
            <span class="hidden sm:inline">My Library</span>
        </a>
        <div class="join">
            {{ if .User | hasAuth }}
            <a class="btn btn-ghost btn-sm border border-w-line text-w-sub hover:border-w-pink hover:text-base-content join-item" href="/profile" data-async-target="main">
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21C20 19.6044 20 18.9067 19.8278 18.3389C19.44 17.0605 18.4395 16.06 17.1611 15.6722C16.5933 15.5 15.8956 15.5 14.5 15.5H9.5C8.10444 15.5 7.40665 15.5 6.83886 15.6722C5.56045 16.06 4.56004 17.0605 4.17224 18.3389C4 18.9067 4 19.6044 4 21M16.5 7.5C16.5 9.98528 14.4853 12 12 12C9.51472 12 7.5 9.98528 7.5 7.5C7.5 5.01472 9.51472 3 12 3C14.4853 3 16.5 5.01472 16.5 7.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="hidden sm:inline">{{ .User | profileName }}</span>
            </a>
            {{ else }}
            <a class="btn btn-ghost btn-sm border border-w-line text-w-sub hover:border-w-pink hover:text-base-content join-item" href="/login" data-async-target="main">Login</a>
            {{ end }}
            <a class="btn btn-sm btn-pink join-item capitalize" href="/donate" target="_blank" data-umami-event="donate">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                </svg>
                <span class="hidden sm:inline">
                {{ if has . "Claims" }}
                    {{ if eq .Claims.Context.Tier.Name "free" }}Donate{{ else }}{{ .Claims.Context.Tier.Name }}{{ end }}
                {{ else }}Donate{{ end }}
                </span>
            </a>
        </div>
    </div>
</div>
{{ "nav.js" | asset }}
{{ end }}
